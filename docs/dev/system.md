# ドキュメンテーション

## アーキテクチャ

### コアモジュール

- `flashcard.ts`: メインの処理フロー
- `subtitle.ts`: 字幕の読み込みと解析
- `ai.ts`: OpenAI APIを使用した文字起こしと翻訳
- `anki.ts`: Ankiへのフラッシュカード追加
- `cli/index.ts`: CLIインターフェース

### 処理フロー

1. ビデオ/URLの入力
   - ローカルビデオファイル、またはYouTube URLからビデオをダウンロード
   - 出力ディレクトリに保存

2. 字幕の処理
   - 既存の字幕ファイルの読み込み、または
   - Whisper APIを使用した文字起こし
   - GPT-4を使用した翻訳

3. 音声セグメントの抽出
   - FFmpegを使用して字幕のタイミングに合わせて音声を抽出
   - セグメントごとにmp3ファイルを生成

4. Ankiへの出力
   - AnkiConnectを使用してフラッシュカードを追加
   - 音声ファイルの添付
